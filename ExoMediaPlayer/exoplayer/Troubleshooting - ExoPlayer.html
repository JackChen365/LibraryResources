<!DOCTYPE html>
<!-- saved from url=(0042)https://exoplayer.dev/troubleshooting.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- Global site tag (gtag.js) - Google Analytics -->
	<script type="text/javascript" async="" src="./Troubleshooting - ExoPlayer_files/f.txt"></script><script type="text/javascript" async="" src="./Troubleshooting - ExoPlayer_files/analytics.js"></script><script async="" src="./Troubleshooting - ExoPlayer_files/js"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-68257324-1');
		
			gtag('config', 'UA-68257324-1', { 'anonymize_ip': true });
		
	</script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Troubleshooting - ExoPlayer</title>

<meta name="description" content="An application level media player for Android">
<link rel="canonical" href="https://exoplayer.dev/troubleshooting.html"><link rel="alternate" type="application/rss+xml" title="ExoPlayer" href="https://exoplayer.dev/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="https://exoplayer.dev/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://exoplayer.dev/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://exoplayer.dev/assets/favicon-16x16.png"><link rel="manifest" href="https://exoplayer.dev/assets/site.webmanifest"><link rel="mask-icon" href="https://exoplayer.dev/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="https://exoplayer.dev/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet -->
<link rel="stylesheet" href="./Troubleshooting - ExoPlayer_files/main.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><!-- start custom head snippets -->
<style rel="stylesheet" type="text/css">
.gsc-result .gs-title {
  line-height: 1.4em;
}
</style>
<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.decodeUrl = function(str) {
    return str ? decodeURIComponent(str.replace(/\+/g, '%20')) : '';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.4',
      sources: {
        font_awesome: 'https://use.fontawesome.com/releases/v5.0.13/css/all.css',
        jquery: 'https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn1.lncld.net/static/js/3.4.1/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script><script src="./Troubleshooting - ExoPlayer_files/jquery.min.js"></script></head>
  <body data-gr-c-s-loaded="true">
    <div class="root" data-is-touch="false">
      <div class="layout--page layout--page--sidebar clearfix js-page-root">
  <div class="page__mask d-print-none js-page-mask js-sidebar-hide"></div>
  <div class="page__viewport">
    <div class="page__actions d-print-none">
      <div class="button button--circle button--lg box-shadow-2 sidebar-button js-sidebar-show">
        <i class="fas fa-bars icon--show"></i>
      </div>
    </div>

    <div class="grid page__grid">

      <div class="page__sidebar d-print-none"><div class="sidebar-toc"><ul class="toc toc--navigator"><li class="toc-h1"></li><li class="toc-h2"><a href="https://exoplayer.dev/">Home</a></li><li class="toc-h2"><a href="https://exoplayer.dev/pros-and-cons.html">Pros and cons</a></li><li class="toc-h2"><a href="https://exoplayer.dev/demo-application.html">Demo application</a></li><li class="toc-h2"><a href="https://exoplayer.dev/supported-formats.html">Supported formats</a></li><li class="toc-h2"><a href="https://exoplayer.dev/supported-devices.html">Supported devices</a></li><li class="toc-h2"><a href="https://exoplayer.dev/glossary.html">Glossary</a></li><li class="toc-h1">Getting started</li><li class="toc-h2"><a href="https://exoplayer.dev/hello-world.html">Hello world</a></li><li class="toc-h2"><a href="https://exoplayer.dev/listening-to-player-events.html">Listening to player events</a></li><li class="toc-h2"><a href="https://exoplayer.dev/media-sources.html">Media sources</a></li><li class="toc-h2"><a href="https://exoplayer.dev/playlists.html">Playlists</a></li><li class="toc-h2"><a href="https://exoplayer.dev/track-selection.html">Track selection</a></li><li class="toc-h2"><a href="https://exoplayer.dev/ui-components.html">UI components</a></li><li class="toc-h2"><a href="https://exoplayer.dev/downloading-media.html">Downloading media</a></li><li class="toc-h2"><a href="https://exoplayer.dev/ad-insertion.html">Ad insertion</a></li><li class="toc-h1">Media types</li><li class="toc-h2"><a href="https://exoplayer.dev/dash.html">DASH</a></li><li class="toc-h2"><a href="https://exoplayer.dev/hls.html">HLS</a></li><li class="toc-h2"><a href="https://exoplayer.dev/smoothstreaming.html">SmoothStreaming</a></li><li class="toc-h2"><a href="https://exoplayer.dev/progressive.html">Progressive</a></li><li class="toc-h1">Advanced topics</li><li class="toc-h2"><a href="https://exoplayer.dev/drm.html">Digital rights management</a></li><li class="toc-h2 active"><a href="https://exoplayer.dev/troubleshooting.html">Troubleshooting</a></li><li class="toc-h2"><a href="https://exoplayer.dev/customization.html">Customization</a></li><li class="toc-h2"><a href="https://exoplayer.dev/battery-consumption.html">Battery consumption</a></li><li class="toc-h2"><a href="https://exoplayer.dev/shrinking.html">APK shrinking</a></li><li class="toc-h2"><a href="https://exoplayer.dev/oems.html">OEM testing</a></li><li class="toc-h2"><a href="https://exoplayer.dev/design-documents.html">Design documents</a></li></ul></div></div><div class="page__main js-page-main cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 110 123.97"><defs><style>.cls-1{fill:none;}.cls-2{fill:#757576;}.cls-3{fill:#212120;}.cls-4{fill:#fff;}.cls-5{fill:#616262;}</style></defs><title>Asset 3</title><g id="Layer_2" data-name="Layer 2"><g id="Logo"><path class="cls-1" d="M59.57,47.36a2.21,2.21,0,0,0,0-.37V27.83l0,.07Z"></path><path class="cls-2" d="M17.24,47.77A13.08,13.08,0,1,1,37.16,31.38a12.7,12.7,0,0,1,1.51,4.14,2.82,2.82,0,0,0,3.77,2.07L59.57,27.7,13.73,1.23A9.1,9.1,0,0,0,.09,9.11V61.88l16.64-9.52A2.85,2.85,0,0,0,17.24,47.77Z"></path><path class="cls-2" d="M.28,61.93H.09l.09,0Z"></path><path class="cls-3" d="M38.65,88.62a13,13,0,0,1-2.39,5.43,13.09,13.09,0,1,1-19-17.79,2.83,2.83,0,0,0-.49-4.58L.09,62v52.82a9.1,9.1,0,0,0,13.64,7.88L59.48,96.33l-16.6-9.59A2.85,2.85,0,0,0,38.65,88.62Z"></path><polygon class="cls-3" points="0.09 61.93 0.09 62.04 0.18 61.98 0.09 61.93"></polygon><path class="cls-4" d="M55.87,74.39A13.09,13.09,0,1,1,50.33,49a12.94,12.94,0,0,1,5.55.68,2.82,2.82,0,0,0,3.69-2.33V27.9l0-.07h0l0,0V27.7L42.44,37.59a2.82,2.82,0,0,1-3.77-2.07,12.7,12.7,0,0,0-1.51-4.14A13.09,13.09,0,1,0,17.24,47.77a2.85,2.85,0,0,1-.51,4.59L.09,61.88l-.09,0H.28l-.1,0L.09,62l16.7,9.64a2.83,2.83,0,0,1,.49,4.58,13.08,13.08,0,1,0,19,17.79,13,13,0,0,0,2.39-5.43,2.85,2.85,0,0,1,4.23-1.88l16.6,9.59.09,0V76.72A2.82,2.82,0,0,0,55.87,74.39Z"></path><path class="cls-5" d="M105.45,54.16,59.62,27.7h0v.13h0V47a2.21,2.21,0,0,1,0,.37,2.82,2.82,0,0,1-3.69,2.33A12.94,12.94,0,0,0,50.33,49a13.08,13.08,0,1,0,5.54,25.38,2.82,2.82,0,0,1,3.7,2.33,2.21,2.21,0,0,1,0,.37V96.38h0l45.83-26.46A9.1,9.1,0,0,0,105.45,54.16Z"></path></g></g></svg><a title="An application level media player for Android" href="https://exoplayer.dev/">ExoPlayer</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="https://exoplayer.dev/doc/reference/" target="_blank" rel="noopener noreferrer">Javadoc</a></li><li class="navigation__item"><a href="https://github.com/google/ExoPlayer" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="navigation__item"><a href="https://medium.com/google-exoplayer" target="_blank" rel="noopener noreferrer">Blog</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet --><article itemscope="" itemtype="http://schema.org/Article"><div class="article__header"><header><h1>Troubleshooting</h1></header></div><meta itemprop="headline" content="Troubleshooting"><meta itemprop="author" content="ExoPlayer"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet --><div class="article__content" itemprop="articleBody"><ul>
  <li><a href="https://exoplayer.dev/troubleshooting.html#fixing-cleartext-http-traffic-not-permitted-errors">Fixing “Cleartext HTTP traffic not permitted” errors</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#fixing-sslhandshakeexception-and-certpathvalidatorexception-errors">Fixing “SSLHandshakeException” and “CertPathValidatorException” errors</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-are-some-media-files-not-seekable">Why are some media files not seekable?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-is-seeking-inaccurate-in-some-mp3-files">Why is seeking inaccurate in some MP3 files?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-do-some-mpeg-ts-files-fail-to-play">Why do some MPEG-TS files fail to play?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-do-some-mp4fmp4-files-play-incorrectly">Why do some MP4/FMP4 files play incorrectly?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-do-some-streams-fail-with-http-response-code-301-or-302">Why do some streams fail with HTTP response code 301 or 302?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-do-some-streams-fail-with-unrecognizedinputformatexception">Why do some streams fail with UnrecognizedInputFormatException?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-doesnt-setplaybackparameters-work-properly-on-some-devices">Why doesn’t setPlaybackParameters work properly on some devices?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#what-do-player-is-accessed-on-the-wrong-thread-warnings-mean">What do “Player is accessed on the wrong thread” warnings mean?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#how-can-i-fix-unexpected-status-line-icy-200-ok">How can I fix “Unexpected status line: ICY 200 OK”?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#how-can-i-query-whether-the-stream-being-played-is-a-live-stream">How can I query whether the stream being played is a live stream?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#how-do-i-keep-audio-playing-when-my-app-is-backgrounded">How do I keep audio playing when my app is backgrounded?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-does-exoplayer-support-my-content-but-the-cast-extension-doesnt">Why does ExoPlayer support my content but the Cast extension doesn’t?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#why-does-content-fail-to-play-but-no-error-is-surfaced">Why does content fail to play, but no error is surfaced?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#how-can-i-get-a-decoding-extension-to-load-and-be-used-for-playback">How can I get a decoding extension to load and be used for playback?</a></li>
  <li><a href="https://exoplayer.dev/troubleshooting.html#can-i-play-youtube-videos-directly-with-exoplayer">Can I play YouTube videos directly with ExoPlayer?</a></li>
</ul>

<hr>

<h4 id="fixing-cleartext-http-traffic-not-permitted-errors">Fixing “Cleartext HTTP traffic not permitted” errors<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>This error will occur if your app requests cleartext traffic (e.g., <code class="language-plaintext highlighter-rouge">http://</code>
rather than <code class="language-plaintext highlighter-rouge">https://</code>) when its Network Security Configuration does not permit
it. If your app targets Android 9 (API level 28) or later, cleartext traffic is
disabled by the default configuration.</p>

<p>If your app needs to work with cleartext traffic (e.g., to stream media over
<code class="language-plaintext highlighter-rouge">http://</code>) then you need to use a Network Security Configuration that permits
it. Please see Android’s
<a href="https://developer.android.com/training/articles/security-config.html">network security documentation</a>
for details. To enable all cleartext traffic, you can simply add
<code class="language-plaintext highlighter-rouge">android:usesCleartextTraffic="true"</code> to the <code class="language-plaintext highlighter-rouge">application</code> element of your app’s
<code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code>.</p>

<h4 id="fixing-sslhandshakeexception-and-certpathvalidatorexception-errors">Fixing “SSLHandshakeException” and “CertPathValidatorException” errors<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p><code class="language-plaintext highlighter-rouge">SSLHandshakeException</code> and <code class="language-plaintext highlighter-rouge">CertPathValidatorException</code> both indicate a problem
with the server’s SSL certificate. These errors are not ExoPlayer specific.
Please see
<a href="https://developer.android.com/training/articles/security-ssl#CommonProblems">Android’s SSL documentation</a>
for more details.</p>

<h4 id="why-are-some-media-files-not-seekable">Why are some media files not seekable?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>By default ExoPlayer does not support seeking in media where the only method for
performing accurate seek operations is for the player to scan and index the
entire file. ExoPlayer considers such files as unseekable. Most modern media
container formats include metadata for seeking (e.g., a sample index), have a
well defined seek algorithm (e.g., interpolated bisection search for Ogg), or
indicate that their content is constant bitrate. Efficient seek operations are
possible and supported by ExoPlayer in these cases.</p>

<p>If you require seeking but have unseekable media, we suggest converting your
content to use a more appropriate container format. For MP3, ADTS and AMR files,
you can also enable seeking under the assumption that the files have a constant
bitrate, as described
<a href="https://exoplayer.dev/progressive.html#enabling-constant-bitrate-seeking">here</a>.</p>

<h4 id="why-is-seeking-inaccurate-in-some-mp3-files">Why is seeking inaccurate in some MP3 files?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>Variable bitrate (VBR) MP3 files are fundamentally unsuitable for use cases that
require exact seeking. There are two reasons for this:</p>

<ol>
  <li>For exact seeking, a container format will ideally provide a precise
time-to-byte mapping in a header. This mapping allows a player to map a
requested seek time to the corresponding byte offset, and start requesting,
parsing and playing media from that offset. The headers available for
specifying this mapping in MP3 (e.g., XING headers) are, unfortunately, often
imprecise.</li>
  <li>For container formats that don’t provide a precise time-to-byte mapping (or
any time-to-byte mapping at all), it’s still possible to perform an exact
seek if the container includes absolute sample timestamps in the stream. In
this case a player can map the seek time to a best guess of the corresponding
byte offset, start requesting media from that offset, parse the first
absolute sample timestamp, and effectively perform a guided binary search
into the media until it finds the right sample. Unfortunately MP3 does not
include absolute sample timestamps in the stream, so this approach is not
possible.</li>
</ol>

<p>For these reasons, the only way to perform an exact seek into a VBR MP3 file is
to scan the entire file and manually build up a time-to-byte mapping in the
player. This doesn’t scale well to large MP3 files, particularly if the user
tries to seek to near the end of the stream shortly after starting playback,
which would require the player to wait until it’s downloaded and indexed the
entire stream before performing the seek. For ExoPlayer, we decided to optimize
for speed over accuracy in this case.</p>

<p><a href="https://github.com/google/ExoPlayer/issues/6787">Issue #6787</a> tracks adding support for exact seeking by building up a
time-to-byte mapping in the player, however when support is added it will likely
be disabled by default, and will still be subject to the fundamental scaling
issue described above.</p>

<p>If you control the media you’re playing, we strongly advise that you use a more
appropriate container format, such as MP4. There are no use cases we’re aware of
where MP3 is the best choice of media format.</p>

<h4 id="why-do-some-mpeg-ts-files-fail-to-play">Why do some MPEG-TS files fail to play?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>Some MPEG-TS files do not contain access unit delimiters (AUDs). By default
ExoPlayer relies on AUDs to cheaply detect frame boundaries. Similarly, some
MPEG-TS files do not contain IDR keyframes. By default these are the only type
of keyframes considered by ExoPlayer.</p>

<p>ExoPlayer will appear to be stuck in the buffering state when asked to play an
MPEG-TS file that lacks AUDs or IDR keyframes. If you need to play such files,
you can do so using <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/ts/DefaultTsPayloadReaderFactory.html#FLAG_DETECT_ACCESS_UNITS"><code class="language-plaintext highlighter-rouge">FLAG_DETECT_ACCESS_UNITS</code></a> and
<a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/ts/DefaultTsPayloadReaderFactory.html#FLAG_ALLOW_NON_IDR_KEYFRAMES"><code class="language-plaintext highlighter-rouge">FLAG_ALLOW_NON_IDR_KEYFRAMES</code></a> respectively. These flags can be set on a
<code class="language-plaintext highlighter-rouge">DefaultExtractorsFactory</code> using <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/DefaultExtractorsFactory#setTsExtractorFlags-int-"><code class="language-plaintext highlighter-rouge">setTsExtractorFlags</code></a>. Use of
<code class="language-plaintext highlighter-rouge">FLAG_DETECT_ACCESS_UNITS</code> has no side effects other than being computationally
expensive relative to AUD based frame boundary detection. Use of
<code class="language-plaintext highlighter-rouge">FLAG_ALLOW_NON_IDR_KEYFRAMES</code> may result in temporary visual corruption at the
start of playback and immediately after seeks when playing some MPEG-TS files.</p>

<h4 id="why-do-some-mp4fmp4-files-play-incorrectly">Why do some MP4/FMP4 files play incorrectly?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>Some MP4/FMP4 files contain edit lists that rewrite the media timeline by
skipping, moving or repeating lists of samples. ExoPlayer has partial support
for applying edit lists. For example, it can delay or repeat groups of samples
starting on a synchronization sample, but it does not truncate audio samples or
preroll media for edits that don’t start on a synchronization sample.</p>

<p>If you are seeing that part of the media is unexpectedly missing or repeated,
try setting <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/mp4/Mp4Extractor.html#FLAG_WORKAROUND_IGNORE_EDIT_LISTS"><code class="language-plaintext highlighter-rouge">Mp4Extractor.FLAG_WORKAROUND_IGNORE_EDIT_LISTS</code></a> or
<a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/mp4/FragmentedMp4Extractor.html#FLAG_WORKAROUND_IGNORE_EDIT_LISTS"><code class="language-plaintext highlighter-rouge">FragmentedMp4Extractor.FLAG_WORKAROUND_IGNORE_EDIT_LISTS</code></a>, which will cause
the extractor to ignore edit lists entirely. These can be set on a
DefaultExtractorsFactory using <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/DefaultExtractorsFactory#setMp4ExtractorFlags-int-"><code class="language-plaintext highlighter-rouge">setMp4ExtractorFlags</code></a> or
<a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/extractor/DefaultExtractorsFactory#setFragmentedMp4ExtractorFlags-int-"><code class="language-plaintext highlighter-rouge">setFragmentedMp4ExtractorFlags</code></a>.</p>

<h4 id="why-do-some-streams-fail-with-http-response-code-301-or-302">Why do some streams fail with HTTP response code 301 or 302?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>HTTP response codes 301 and 302 both indicate redirection. Brief descriptions
can be found on <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">Wikipedia</a>. When ExoPlayer makes a request and receives a
response with status code 301 or 302, it will normally follow the redirect
and start playback as normal. The one case where this does not happen by default
is for cross-protocol redirects. A cross-protocol redirect is one that redirects
from HTTPS to HTTP or vice-versa (or less commonly, between another pair of
protocols). You can test whether a URL causes a cross-protocol redirect using
the <a href="https://www.gnu.org/software/wget/manual/wget.html">wget</a> command line tool as follows:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget "https://yourserver.com/test.mp3" 2&gt;&amp;1  | grep Location
</code></pre></div></div>
<p>The output should look something like this:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wget "https://yourserver.com/test.mp3" 2&gt;&amp;1  | grep Location
Location: https://second.com/test.mp3 [following]
Location: http://third.com/test.mp3 [following]
</code></pre></div></div>
<p>In this example there are two redirects. The first redirect is from
<code class="language-plaintext highlighter-rouge">https://yourserver.com/test.mp3</code> to <code class="language-plaintext highlighter-rouge">https://second.com/test.mp3</code>. Both are
HTTPS, and so this is not a cross-protocol redirect. The second redirect is from
<code class="language-plaintext highlighter-rouge">https://second.com/test.mp3</code> to <code class="language-plaintext highlighter-rouge">http://third.com/test.mp3</code>. This redirects
from HTTPS to HTTP and so is a cross-protocol redirect. ExoPlayer will not
follow this redirect in its default configuration, meaning playback will fail.</p>

<p>If you need to, you can configure ExoPlayer to follow cross-protocol redirects
when instantiating the <code class="language-plaintext highlighter-rouge">HttpDataSource.Factory</code> instances used by ExoPlayer in
your application. <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/upstream/DefaultHttpDataSourceFactory.html"><code class="language-plaintext highlighter-rouge">DefaultHttpDataSourceFactory</code></a> has constructors that
accept an <code class="language-plaintext highlighter-rouge">allowCrossProtocolRedirects</code> argument for this purpose, as do other
<code class="language-plaintext highlighter-rouge">HttpDataSource.Factory</code> implementations. Set these arguments to true to enable
cross-protocol redirects.</p>

<h4 id="why-do-some-streams-fail-with-unrecognizedinputformatexception">Why do some streams fail with UnrecognizedInputFormatException?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>This question relates to playback failures of the form:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UnrecognizedInputFormatException: None of the available extractors
(MatroskaExtractor, FragmentedMp4Extractor, ...) could read the stream.
</code></pre></div></div>
<p>There are two possible causes of this failure. The most common cause is that
you’re trying to play DASH (mpd), HLS (m3u8) or SmoothStreaming (ism, isml)
content using <code class="language-plaintext highlighter-rouge">ProgressiveMediaSource</code>. To play such streams you must use the
correct <code class="language-plaintext highlighter-rouge">MediaSource</code> implementations, which are <code class="language-plaintext highlighter-rouge">DashMediaSource</code>,
<code class="language-plaintext highlighter-rouge">HlsMediaSource</code> and <code class="language-plaintext highlighter-rouge">SsMediaSource</code> respectively. If you don’t know the type of
the media then <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/util/Util.html#inferContentType-android.net.Uri-"><code class="language-plaintext highlighter-rouge">Util.inferContentType</code></a> can often be used, as demonstrated by
<code class="language-plaintext highlighter-rouge">PlayerActivity</code> in the ExoPlayer demo app.</p>

<p>The second, less common cause, is that ExoPlayer does not support the container
format of the media that you’re trying to play. In this case the failure is
working as intended, however feel free to submit a feature request to our
<a href="https://github.com/google/ExoPlayer/issues">issue tracker</a>, including details of the container format and a test stream.
Please search for an existing feature request before submitting a new one.</p>

<h4 id="why-doesnt-setplaybackparameters-work-properly-on-some-devices">Why doesn’t setPlaybackParameters work properly on some devices?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>When running a debug build of your app on Android M and earlier, you may
experience choppy performance, audible artifacts and high CPU utilization when
using the <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/Player.html#setPlaybackParameters-com.google.android.exoplayer2.PlaybackParameters-"><code class="language-plaintext highlighter-rouge">setPlaybackParameters</code></a> API. This is because an optimization
that’s important to this API is disabled for debug builds running on these
versions of Android.</p>

<p>It’s important to note that this issue affects debug builds only. It does <em>not</em>
affect release builds, for which the optimization is always enabled. Hence the
releases you provide to end users should not be affected by this issue.</p>

<h4 id="what-do-player-is-accessed-on-the-wrong-thread-warnings-mean">What do “Player is accessed on the wrong thread” warnings mean?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>If you are seeing this warning, some code in your app is accessing
<code class="language-plaintext highlighter-rouge">SimpleExoPlayer</code> on the wrong thread (check the reported stack trace!).
ExoPlayer instances need to be accessed from a single thread only. In most
cases, this should be the application’s main thread. For details, please read
through the <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/ExoPlayer.html">“Threading model” section of the ExoPlayer Javadoc</a>.</p>

<h4 id="how-can-i-fix-unexpected-status-line-icy-200-ok">How can I fix “Unexpected status line: ICY 200 OK”?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>This problem can occur if the server response includes an ICY status line,
rather than one that’s HTTP compliant. ICY status lines are deprecated and
should not be used, so if you control the server you should update it to provide
an HTTP compliant response. If you’re unable to do this then using the
<a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/okhttp">OkHttp extension</a> will resolve the problem, since it’s able to handle ICY
status lines correctly.</p>

<h4 id="how-can-i-query-whether-the-stream-being-played-is-a-live-stream">How can I query whether the stream being played is a live stream?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>You can query ExoPlayer’s <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/ExoPlayer.html#isCurrentWindowLive--"><code class="language-plaintext highlighter-rouge">isCurrentWindowLive</code></a> method. In addition, you can
check <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/ExoPlayer.html#isCurrentWindowDynamic--"><code class="language-plaintext highlighter-rouge">isCurrentWindowDynamic</code></a> to find out whether the window is dynamic
(i.e., still updating over time).</p>

<h4 id="how-do-i-keep-audio-playing-when-my-app-is-backgrounded">How do I keep audio playing when my app is backgrounded?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>There are a few steps that you need to take to ensure continued playback of
audio when your app is in the background:</p>

<ol>
  <li>You need to have a running <a href="https://developer.android.com/guide/components/services.html#Foreground">foreground service</a>. This prevents the system
from killing your process to free up resources.</li>
  <li>You need to hold a <a href="https://developer.android.com/reference/android/net/wifi/WifiManager.WifiLock.html"><code class="language-plaintext highlighter-rouge">WifiLock</code></a> and a <a href="https://developer.android.com/reference/android/os/PowerManager.WakeLock.html"><code class="language-plaintext highlighter-rouge">WakeLock</code></a>. These ensure that the
system keeps the WiFi radio and CPU awake. This can be easily done if using
<a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/SimpleExoPlayer.html"><code class="language-plaintext highlighter-rouge">SimpleExoPlayer</code></a> by calling <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/SimpleExoPlayer.html#setWakeMode-int-"><code class="language-plaintext highlighter-rouge">setWakeMode</code></a>, which will automatically
acquire and release the required locks at the correct times.</li>
</ol>

<p>It’s important that you release the locks (if not using <code class="language-plaintext highlighter-rouge">setWakeMode</code>) and stop
the service as soon as audio is no longer being played.</p>

<h4 id="why-does-exoplayer-support-my-content-but-the-cast-extension-doesnt">Why does ExoPlayer support my content but the Cast extension doesn’t?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>It’s possible that the content that you are trying to play is not
<a href="https://www.w3.org/wiki/CORS_Enabled">CORS enabled</a>. The <a href="https://developers.google.com/cast/docs/chrome_sender/advanced#cors_requirements">Cast framework</a> requires content to be CORS enabled in
order to play it.</p>

<h4 id="why-does-content-fail-to-play-but-no-error-is-surfaced">Why does content fail to play, but no error is surfaced?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>It’s possible that the device on which you are playing the content does not
support a specific media sample format. This can be easily confirmed by adding
an <a href="https://exoplayer.dev/listening-to-player-events.html#using-eventlogger"><code class="language-plaintext highlighter-rouge">EventLogger</code></a> as a listener to your player, and looking for a line
similar to this one in Logcat:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ ] Track:x, id=x, mimeType=mime/type, ... , supported=NO_UNSUPPORTED_TYPE
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">NO_UNSUPPORTED_TYPE</code> means that the device is not able to decode the media
sample format specified by the <code class="language-plaintext highlighter-rouge">mimeType</code>. See the <a href="https://developer.android.com/guide/topics/media/media-formats#core">Android media formats
documentation</a> for information about supported sample formats. <a href="https://exoplayer.dev/troubleshooting.html#how-can-i-get-a-decoding-extension-to-load-and-be-used-for-playback">How can I get
a decoding extension to load and be used for playback?</a> may also be useful.</p>

<h4 id="how-can-i-get-a-decoding-extension-to-load-and-be-used-for-playback">How can I get a decoding extension to load and be used for playback?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<ul>
  <li>Most extensions have manual steps to check out and build the dependencies, so
make sure you’ve followed the steps in the README for the relevant extension.
For example, for the FFmpeg extension it’s necessary to follow the
instructions in <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/ffmpeg/README.md">extensions/ffmpeg/README.md</a>, including passing
configuration flags to <a href="https://exoplayer.dev/supported-formats.html#ffmpeg-extension">enable decoders</a> for the format(s) you want to play.</li>
  <li>For extensions that have native code, make sure you’re using the correct
version of the Android NDK as specified in the README, and look out for any
errors that appear during configuration and building. You should see <code class="language-plaintext highlighter-rouge">.so</code>
files appear in the <code class="language-plaintext highlighter-rouge">libs</code> subdirectory of the extension’s path for each
supported architecture after following the steps in the README.</li>
  <li>To try out playback using the extension in the <a href="https://exoplayer.dev/demo-application.html">demo application</a>, see
<a href="https://exoplayer.dev/demo-application.html#enabling-extension-decoders">enabling extension decoders</a>. See the README for the extension for
instructions on using the extension from your own app.</li>
  <li>If you’re using <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/DefaultRenderersFactory.html"><code class="language-plaintext highlighter-rouge">DefaultRenderersFactory</code></a>, you should see an info-level
log line like “Loaded FfmpegAudioRenderer” in Logcat when the extension loads.
If that’s missing, make sure the application has a dependency on the
extension.</li>
  <li>If you see warning-level logs from <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/util/LibraryLoader.html"><code class="language-plaintext highlighter-rouge">LibraryLoader</code></a> in Logcat, this
indicates that loading the native component of the extension failed. If this
happens, check you’ve followed the steps in the extension’s README correctly
and that no errors were output while following the instructions.</li>
</ul>

<p>If you’re still experiencing problems using extensions, please check the
ExoPlayer <a href="https://github.com/google/ExoPlayer/issues">issue tracker</a> for any relevant recent issues. If you need to file
a new issue and it relates to building the native part of the extension, please
include full command line output from running README instructions, to help us
diagnose the issue.</p>

<h4 id="can-i-play-youtube-videos-directly-with-exoplayer">Can I play YouTube videos directly with ExoPlayer?<a class="anchor d-print-none" aria-hidden="true"><i class="fas fa-anchor"></i></a></h4>

<p>No, ExoPlayer cannot play videos from YouTube, i.e., urls of the form
` https://www.youtube.com/watch?v=…`. Instead, you should use the <a href="https://developers.google.com/youtube/android/player/">YouTube
Android Player API</a> which
is the official way to play YouTube videos on Android.</p>

</div><div class="d-print-none"><footer class="article__footer"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet --></footer><div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="https://exoplayer.dev/drm.html">Digital rights management</a></div><div class="next"><span>NEXT</span><a href="https://exoplayer.dev/customization.html">Customization</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();</script></div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet --></div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ExoPlayer"><meta itemprop="url" content="/"><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Follow us on Medium.">
        <a class="button button--circle medium-button" itemprop="sameAs" href="https://medium.com/google-exoplayer" target="_blank" rel="noopener noreferrer">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M834.7 279.8l61.3-58.9V208H683.7L532.4 586.4 360.3 208H137.7v12.9l71.6 86.6c7 6.4 10.6 15.8 9.7 25.2V673c2.2 12.3-1.7 24.8-10.3 33.7L128 805v12.7h228.6v-12.9l-80.6-98a39.99 39.99 0 0 1-11.1-33.7V378.7l200.7 439.2h23.3l172.6-439.2v349.9c0 9.2 0 11.1-6 17.2l-62.1 60.3V819h301.2v-12.9l-59.9-58.9c-5.2-4-7.9-10.7-6.8-17.2V297a18.1 18.1 0 0 1 6.8-17.2z"></path>
</svg></div>
        </a>
      </li><li title="Follow us on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/google/ExoPlayer" target="_blank" rel="noopener noreferrer">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z"></path>
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© ExoPlayer 2019,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer></div></div>
    </div></div></div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>window.useDefaultSearchBox = false;</script><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark search--google-custom-search-engine">
    <div class="main">
      <div class="content js-gcse">
        <!-- <gcse:search enableAutoComplete="true" gname="search-box"></gcse:search>
        <gcse:searchresults-only gname="results"></gcse:searchresults-only> -->
      <gcse:search enableautocomplete="true" gname="search-box"></gcse:search><gcse:searchresults-only gname="results"></gcse:searchresults-only></div>
    </div>
  </div>
  <script>
    var gcse = document.getElementsByClassName('js-gcse')[0];
    var gcseSearch = document.createElement('gcse:search');
    gcseSearch.setAttribute('enableAutoComplete', 'true');
    gcseSearch.setAttribute('gname', 'search-box');
    var gcseSearchresults = document.createElement('gcse:searchresults-only');
    gcseSearchresults.setAttribute('gname', 'results');
    gcse.appendChild(gcseSearch);
    gcse.appendChild(gcseSearchresults);
  </script>
  <script>var SOURCES = window.TEXT_VARIABLES.sources;
window.Lazyload.js(SOURCES.jquery, function() {
  /* global google */
  var search = (window.search || (window.search = {}));
  var searchBox, searchInput, clearIcon, searchModal;

  search.clear = function() {
    searchBox && searchBox.clearAllResults();
  };
  search.onShow = function() {
    searchInput && searchInput.focus();
  };
  search.onHide = function() {
    searchInput && searchInput.blur();
  };

  window.__gcse = {
    callback: function() {
      searchBox = google.search.cse.element.getElement('search-box');
      searchInput = document.getElementById('gsc-i-id1');
      clearIcon = document.getElementById('gs_cb50');
      searchModal = search.searchModal;
      searchModal && searchModal.$el && searchModal.$el.on('click', function(e) {
        (e.target === this || e.target === clearIcon || e.target.className === 'gs-title') && searchModal.hide();
      });
    }
  };
  var cx = '009764199895742571316:nuhckqry2_e'; // Insert your own Custom Search Engine ID here
  var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//cse.google.com/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
});
</script></div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();/*(function () {

})();*/</script><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;

  window.Lazyload.js(SOURCES.jquery, function() {
    var $pageMask = $('.js-page-mask');
    var $pageRoot = $('.js-page-root');
    var $pageMain = $('.js-page-main');
    var $sidebarShow = $('.js-sidebar-show');
    var $sidebarHide = $('.js-sidebar-hide');

    function freeze(e) {
      if (e.target === $pageMask[0]) {
        e.preventDefault();
      }
    }
    function stopBodyScrolling(bool) {
      if (bool === true) {
        window.addEventListener('touchmove', freeze, { passive: false });
      } else {
        window.removeEventListener('touchmove', freeze, { passive: false });
      }
    }

    $sidebarShow.on('click', function() {
      stopBodyScrolling(true); $pageRoot.addClass('show-sidebar');
    });
    $sidebarHide.on('click', function() {
      stopBodyScrolling(false); $pageRoot.removeClass('show-sidebar');
    });
  });
})();</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();</script>
  
</body></html>