<!DOCTYPE html>
<!-- saved from url=(0036)https://exoplayer.dev/shrinking.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!-- Global site tag (gtag.js) - Google Analytics -->
	<script type="text/javascript" async="" src="./APK shrinking - ExoPlayer_files/analytics.js"></script><script async="" src="./APK shrinking - ExoPlayer_files/js"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-68257324-1');
		
			gtag('config', 'UA-68257324-1', { 'anonymize_ip': true });
		
	</script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>APK shrinking - ExoPlayer</title>

<meta name="description" content="An application level media player for Android">
<link rel="canonical" href="https://exoplayer.dev/shrinking.html"><link rel="alternate" type="application/rss+xml" title="ExoPlayer" href="https://exoplayer.dev/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="https://exoplayer.dev/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://exoplayer.dev/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://exoplayer.dev/assets/favicon-16x16.png"><link rel="manifest" href="https://exoplayer.dev/assets/site.webmanifest"><link rel="mask-icon" href="https://exoplayer.dev/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="https://exoplayer.dev/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet -->
<link rel="stylesheet" href="./APK shrinking - ExoPlayer_files/main.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"><!-- start custom head snippets -->
<style rel="stylesheet" type="text/css">
.gsc-result .gs-title {
  line-height: 1.4em;
}
</style>
<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.decodeUrl = function(str) {
    return str ? decodeURIComponent(str.replace(/\+/g, '%20')) : '';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.4',
      sources: {
        font_awesome: 'https://use.fontawesome.com/releases/v5.0.13/css/all.css',
        jquery: 'https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn1.lncld.net/static/js/3.4.1/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script><script src="./APK shrinking - ExoPlayer_files/jquery.min.js"></script></head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page layout--page--sidebar clearfix js-page-root">
  <div class="page__mask d-print-none js-page-mask js-sidebar-hide"></div>
  <div class="page__viewport">
    <div class="page__actions d-print-none">
      <div class="button button--circle button--lg box-shadow-2 sidebar-button js-sidebar-show">
        <i class="fas fa-bars icon--show"></i>
      </div>
    </div>

    <div class="grid page__grid">

      <div class="page__sidebar d-print-none"><div class="sidebar-toc"><ul class="toc toc--navigator"><li class="toc-h1"></li><li class="toc-h2"><a href="https://exoplayer.dev/">Home</a></li><li class="toc-h2"><a href="https://exoplayer.dev/pros-and-cons.html">Pros and cons</a></li><li class="toc-h2"><a href="https://exoplayer.dev/demo-application.html">Demo application</a></li><li class="toc-h2"><a href="https://exoplayer.dev/supported-formats.html">Supported formats</a></li><li class="toc-h2"><a href="https://exoplayer.dev/supported-devices.html">Supported devices</a></li><li class="toc-h2"><a href="https://exoplayer.dev/glossary.html">Glossary</a></li><li class="toc-h1">Getting started</li><li class="toc-h2"><a href="https://exoplayer.dev/hello-world.html">Hello world</a></li><li class="toc-h2"><a href="https://exoplayer.dev/listening-to-player-events.html">Listening to player events</a></li><li class="toc-h2"><a href="https://exoplayer.dev/media-sources.html">Media sources</a></li><li class="toc-h2"><a href="https://exoplayer.dev/playlists.html">Playlists</a></li><li class="toc-h2"><a href="https://exoplayer.dev/track-selection.html">Track selection</a></li><li class="toc-h2"><a href="https://exoplayer.dev/ui-components.html">UI components</a></li><li class="toc-h2"><a href="https://exoplayer.dev/downloading-media.html">Downloading media</a></li><li class="toc-h2"><a href="https://exoplayer.dev/ad-insertion.html">Ad insertion</a></li><li class="toc-h1">Media types</li><li class="toc-h2"><a href="https://exoplayer.dev/dash.html">DASH</a></li><li class="toc-h2"><a href="https://exoplayer.dev/hls.html">HLS</a></li><li class="toc-h2"><a href="https://exoplayer.dev/smoothstreaming.html">SmoothStreaming</a></li><li class="toc-h2"><a href="https://exoplayer.dev/progressive.html">Progressive</a></li><li class="toc-h1">Advanced topics</li><li class="toc-h2"><a href="https://exoplayer.dev/drm.html">Digital rights management</a></li><li class="toc-h2"><a href="https://exoplayer.dev/troubleshooting.html">Troubleshooting</a></li><li class="toc-h2"><a href="https://exoplayer.dev/customization.html">Customization</a></li><li class="toc-h2"><a href="https://exoplayer.dev/battery-consumption.html">Battery consumption</a></li><li class="toc-h2 active"><a href="https://exoplayer.dev/shrinking.html">APK shrinking</a></li><li class="toc-h2"><a href="https://exoplayer.dev/oems.html">OEM testing</a></li><li class="toc-h2"><a href="https://exoplayer.dev/design-documents.html">Design documents</a></li></ul></div></div><div class="page__main js-page-main cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 110 123.97"><defs><style>.cls-1{fill:none;}.cls-2{fill:#757576;}.cls-3{fill:#212120;}.cls-4{fill:#fff;}.cls-5{fill:#616262;}</style></defs><title>Asset 3</title><g id="Layer_2" data-name="Layer 2"><g id="Logo"><path class="cls-1" d="M59.57,47.36a2.21,2.21,0,0,0,0-.37V27.83l0,.07Z"></path><path class="cls-2" d="M17.24,47.77A13.08,13.08,0,1,1,37.16,31.38a12.7,12.7,0,0,1,1.51,4.14,2.82,2.82,0,0,0,3.77,2.07L59.57,27.7,13.73,1.23A9.1,9.1,0,0,0,.09,9.11V61.88l16.64-9.52A2.85,2.85,0,0,0,17.24,47.77Z"></path><path class="cls-2" d="M.28,61.93H.09l.09,0Z"></path><path class="cls-3" d="M38.65,88.62a13,13,0,0,1-2.39,5.43,13.09,13.09,0,1,1-19-17.79,2.83,2.83,0,0,0-.49-4.58L.09,62v52.82a9.1,9.1,0,0,0,13.64,7.88L59.48,96.33l-16.6-9.59A2.85,2.85,0,0,0,38.65,88.62Z"></path><polygon class="cls-3" points="0.09 61.93 0.09 62.04 0.18 61.98 0.09 61.93"></polygon><path class="cls-4" d="M55.87,74.39A13.09,13.09,0,1,1,50.33,49a12.94,12.94,0,0,1,5.55.68,2.82,2.82,0,0,0,3.69-2.33V27.9l0-.07h0l0,0V27.7L42.44,37.59a2.82,2.82,0,0,1-3.77-2.07,12.7,12.7,0,0,0-1.51-4.14A13.09,13.09,0,1,0,17.24,47.77a2.85,2.85,0,0,1-.51,4.59L.09,61.88l-.09,0H.28l-.1,0L.09,62l16.7,9.64a2.83,2.83,0,0,1,.49,4.58,13.08,13.08,0,1,0,19,17.79,13,13,0,0,0,2.39-5.43,2.85,2.85,0,0,1,4.23-1.88l16.6,9.59.09,0V76.72A2.82,2.82,0,0,0,55.87,74.39Z"></path><path class="cls-5" d="M105.45,54.16,59.62,27.7h0v.13h0V47a2.21,2.21,0,0,1,0,.37,2.82,2.82,0,0,1-3.69,2.33A12.94,12.94,0,0,0,50.33,49a13.08,13.08,0,1,0,5.54,25.38,2.82,2.82,0,0,1,3.7,2.33,2.21,2.21,0,0,1,0,.37V96.38h0l45.83-26.46A9.1,9.1,0,0,0,105.45,54.16Z"></path></g></g></svg><a title="An application level media player for Android" href="https://exoplayer.dev/">ExoPlayer</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="https://exoplayer.dev/doc/reference/" target="_blank" rel="noopener noreferrer">Javadoc</a></li><li class="navigation__item"><a href="https://github.com/google/ExoPlayer" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="navigation__item"><a href="https://medium.com/google-exoplayer" target="_blank" rel="noopener noreferrer">Blog</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet --><article itemscope="" itemtype="http://schema.org/Article"><div class="article__header"><header><h1>APK shrinking</h1></header></div><meta itemprop="headline" content="APK shrinking"><meta itemprop="author" content="ExoPlayer"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet --><div class="article__content" itemprop="articleBody"><p>Minimizing APK size is an important aspect of developing a good Android
application. This is particularly true when targeting developing markets, and
also when developing an Android Instant App. For such cases it may be desirable
to minimize the size of the ExoPlayer library that’s included in the APK. This
page outlines some simple steps that can help to achieve this.</p>

<h2 id="use-modular-dependencies">Use modular dependencies</h2>

<p>The most convenient way to use ExoPlayer is to add a dependency to the full
library:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="s1">'com.google.android.exoplayer:exoplayer:2.X.X'</span>
</code></pre></div></div>

<p>However this may pull in more features than your app needs. Instead, depend only
on the library modules that you actually need. For example the following will
add dependencies on the Core, DASH and UI library modules, as might be required
for an app that plays DASH content:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="s1">'com.google.android.exoplayer:exoplayer-core:2.X.X'</span>
<span class="n">implementation</span> <span class="s1">'com.google.android.exoplayer:exoplayer-dash:2.X.X'</span>
<span class="n">implementation</span> <span class="s1">'com.google.android.exoplayer:exoplayer-ui:2.X.X'</span>
</code></pre></div></div>

<h2 id="use-proguard-and-shrink-resources">Use ProGuard and shrink resources</h2>

<p>Classes that are not used by your app can be removed by enabling ProGuard in
your app module’s <code class="language-plaintext highlighter-rouge">build.gradle</code> file:</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">buildTypes</span> <span class="o">{</span>
   <span class="n">release</span> <span class="o">{</span>
       <span class="n">minifyEnabled</span> <span class="kc">true</span>
       <span class="n">shrinkResources</span> <span class="kc">true</span>
       <span class="n">useProguard</span> <span class="kc">true</span>
       <span class="n">proguardFiles</span> <span class="o">=</span> <span class="o">[</span>
           <span class="n">getDefaultProguardFile</span><span class="o">(</span><span class="s1">'proguard-android.txt'</span><span class="o">),</span>
           <span class="s1">'proguard-rules.pro'</span>
       <span class="o">]</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ExoPlayer is structured in a way that allows ProGuard to remove unused
functionality. For example, for an app that plays DASH content, ExoPlayer’s
contribution to the APK size can be reduced by approximately 40%.</p>

<p>Enabling <code class="language-plaintext highlighter-rouge">shrinkResources</code> in your app module’s <code class="language-plaintext highlighter-rouge">build.gradle</code> file can result
in a further reduction in size.</p>

<h2 id="specify-which-extractors-your-app-needs">Specify which extractors your app needs</h2>

<p>If your app uses <code class="language-plaintext highlighter-rouge">ProgressiveMediaSource</code>, be aware that by default it will use
<code class="language-plaintext highlighter-rouge">DefaultExtractorsFactory</code>. <code class="language-plaintext highlighter-rouge">DefaultExtractorsFactory</code> depends on all of the
<code class="language-plaintext highlighter-rouge">Extractor</code> implementations provided in the ExoPlayer library, and as a result
none of them will be removed by ProGuard. If you know that your app only needs
to play a small number of container formats, you can specify your own
<code class="language-plaintext highlighter-rouge">ExtractorsFactory</code> instead. For example, an app that only needs to play mp4
files can define a factory like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">class</span> <span class="nc">Mp4ExtractorsFactory</span> <span class="kd">implements</span> <span class="nc">ExtractorsFactory</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">Extractor</span><span class="o">[]</span> <span class="nf">createExtractors</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nc">Extractor</span><span class="o">[]</span> <span class="o">{</span><span class="k">new</span> <span class="nc">Mp4Extractor</span><span class="o">()};</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>And use it when instantiating <code class="language-plaintext highlighter-rouge">ProgressiveMediaSource</code> instances, like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">ProgressiveMediaSource</span><span class="o">.</span><span class="na">Factory</span><span class="o">(</span>
        <span class="n">mediaDataSourceFactory</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Mp4ExtractorsFactory</span><span class="o">())</span>
    <span class="o">.</span><span class="na">createMediaSource</span><span class="o">(</span><span class="n">uri</span><span class="o">);</span>
</code></pre></div></div>

<p>This will allow other <code class="language-plaintext highlighter-rouge">Extractor</code> implementations to be removed by ProGuard,
which can result in a significant reduction in size.</p>

<h2 id="specify-which-renderers-your-app-needs">Specify which renderers your app needs</h2>

<p>If your app uses <code class="language-plaintext highlighter-rouge">SimpleExoPlayer</code>, be aware that by default the player’s
renderers will be created using <code class="language-plaintext highlighter-rouge">DefaultRenderersFactory</code>.
<code class="language-plaintext highlighter-rouge">DefaultRenderersFactory</code> depends on all of the <code class="language-plaintext highlighter-rouge">Renderer</code> implementations
provided in the ExoPlayer library, and as a result none of them will be removed
by ProGuard. If you know that your app only needs a subset of renderers, you can
specify your own <code class="language-plaintext highlighter-rouge">RenderersFactory</code> instead. For example, an app that only plays
audio can define a factory like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">class</span> <span class="nc">AudioOnlyRenderersFactory</span> <span class="kd">implements</span> <span class="nc">RenderersFactory</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Context</span> <span class="n">context</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">AudioOnlyRenderersFactory</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">Renderer</span><span class="o">[]</span> <span class="nf">createRenderers</span><span class="o">(</span>
      <span class="nc">Handler</span> <span class="n">eventHandler</span><span class="o">,</span>
      <span class="nc">VideoRendererEventListener</span> <span class="n">videoRendererEventListener</span><span class="o">,</span>
      <span class="nc">AudioRendererEventListener</span> <span class="n">audioRendererEventListener</span><span class="o">,</span>
      <span class="nc">TextOutput</span> <span class="n">textRendererOutput</span><span class="o">,</span>
      <span class="nc">MetadataOutput</span> <span class="n">metadataRendererOutput</span><span class="o">,</span>
      <span class="nc">DrmSessionManager</span><span class="o">&lt;</span><span class="nc">FrameworkMediaCrypto</span><span class="o">&gt;</span> <span class="n">drmSessionManager</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nc">Renderer</span><span class="o">[]</span> <span class="o">{</span><span class="k">new</span> <span class="nc">MediaCodecAudioRenderer</span><span class="o">(</span>
        <span class="nc">MediaCodecSelector</span><span class="o">.</span><span class="na">DEFAULT</span><span class="o">,</span> <span class="n">eventHandler</span><span class="o">,</span> <span class="n">audioRendererEventListener</span><span class="o">)};</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>And use it when instantiating <code class="language-plaintext highlighter-rouge">SimpleExoPlayer</code> instances, like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">SimpleExoPlayer</span> <span class="n">player</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleExoPlayer</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span>
    <span class="n">context</span><span class="o">,</span> <span class="k">new</span> <span class="nc">AudioOnlyRenderersFactory</span><span class="o">(</span><span class="n">context</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>This will allow other <code class="language-plaintext highlighter-rouge">Renderer</code> implementations to be removed by ProGuard. In
this particular example video, text and metadata renderers are removed.</p>
</div><div class="d-print-none"><footer class="article__footer"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet --></footer><div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="https://exoplayer.dev/battery-consumption.html">Battery consumption</a></div><div class="next"><span>NEXT</span><a href="https://exoplayer.dev/oems.html">OEM testing</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();</script></div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet --></div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ExoPlayer"><meta itemprop="url" content="/"><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Follow us on Medium.">
        <a class="button button--circle medium-button" itemprop="sameAs" href="https://medium.com/google-exoplayer" target="_blank" rel="noopener noreferrer">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M834.7 279.8l61.3-58.9V208H683.7L532.4 586.4 360.3 208H137.7v12.9l71.6 86.6c7 6.4 10.6 15.8 9.7 25.2V673c2.2 12.3-1.7 24.8-10.3 33.7L128 805v12.7h228.6v-12.9l-80.6-98a39.99 39.99 0 0 1-11.1-33.7V378.7l200.7 439.2h23.3l172.6-439.2v349.9c0 9.2 0 11.1-6 17.2l-62.1 60.3V819h301.2v-12.9l-59.9-58.9c-5.2-4-7.9-10.7-6.8-17.2V297a18.1 18.1 0 0 1 6.8-17.2z"></path>
</svg></div>
        </a>
      </li><li title="Follow us on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/google/ExoPlayer" target="_blank" rel="noopener noreferrer">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z"></path>
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© ExoPlayer 2019,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer></div></div>
    </div></div></div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>window.useDefaultSearchBox = false;</script><script></script></div></div></div></body></html>